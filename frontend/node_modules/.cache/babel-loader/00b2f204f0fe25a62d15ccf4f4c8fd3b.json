{"ast":null,"code":"export class Card {\n  /*** Representation ***/\n\n  /** \n   * AF(width, height, loc) =\n   * \n   * Representation Invariant\n   * \n   * Representation Exposure\n   * \n   */\n  constructor(width, height, left, right) {\n    this.width = width;\n    this.height = height;\n    this.loc = void 0;\n    this.loc = {\n      left: left,\n      right: right\n    };\n  }\n  /**\n   * Sets the location of the card\n   * \n   * @param left the bottom left (x, y) coordinates of the card\n   * @param right the bottom right (x, y) coordinates of the card\n   */\n\n\n  setLocation(left, right) {\n    this.loc = {\n      left: left,\n      right: right\n    };\n  }\n  /**\n   * @returns the rotation angle of the block when placed at loc\n   */\n\n\n  angle() {\n    return Math.asin(Math.abs(this.loc.left.y - this.loc.right.y) / this.width);\n  }\n\n}\nexport class CardBucket2D {\n  /*** Representation ***/\n\n  /** \n   * AF(cards) =\n   * \n   * Representation Invariant\n   * \n   * Representation Exposure\n   * \n   */\n  constructor(size) {\n    this.size = size;\n    this.cards = [];\n  }\n  /** @inheritdoc */\n\n\n  drop(card) {\n    const cardW = card.width;\n    const n = Math.random() * (2 * (this.size.width - 1) / cardW - 1) + cardW / 2;\n\n    const left = this._firstEncounter(n - cardW / 2);\n\n    const right = this._firstEncounter(n + cardW / 2);\n\n    card.setLocation(left, right);\n    this.cards.push(card);\n  }\n  /**\n   * Finds the card which a dropping card would encounter first as it falls\n   * \n   * @param x the x coordinate to consider\n   * @returns the (x, y) coordinate of where the first encountered card is located\n   */\n\n\n  _firstEncounter(x) {\n    let y = 0;\n\n    for (const currCard of this.cards) {\n      if (currCard.loc.left.x <= x && x <= currCard.loc.right.x) {\n        const currentY = Math.min(currCard.loc.left.y, currCard.loc.right.y) + currCard.height * Math.cos(currCard.angle());\n        if (currentY > y) y = currentY;\n      }\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  }\n\n}","map":{"version":3,"sources":["/Users/king_ahmed1421/Simba/Ahmed/frontend/src/gallery/utils.ts"],"names":["Card","constructor","width","height","left","right","loc","setLocation","angle","Math","asin","abs","y","CardBucket2D","size","cards","drop","card","cardW","n","random","_firstEncounter","push","x","currCard","currentY","min","cos"],"mappings":"AAeA,OAAO,MAAMA,IAAN,CAAW;AACd;;AAGA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AAEIC,EAAAA,WAAW,CAAUC,KAAV,EAAkCC,MAAlC,EACCC,IADD,EAC+BC,KAD/B,EAC8D;AAAA,SADpDH,KACoD,GADpDA,KACoD;AAAA,SAD5BC,MAC4B,GAD5BA,MAC4B;AAAA,SAZlEG,GAYkE;AACrE,SAAKA,GAAL,GAAW;AAACF,MAAAA,IAAI,EAAEA,IAAP;AAAaC,MAAAA,KAAK,EAAEA;AAApB,KAAX;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACWE,EAAAA,WAAW,CAACH,IAAD,EAA+BC,KAA/B,EAAoE;AAAC,SAAKC,GAAL,GAAW;AAACF,MAAAA,IAAI,EAAEA,IAAP;AAAaC,MAAAA,KAAK,EAAEA;AAApB,KAAX;AAAuC;AAE9H;AACJ;AACA;;;AACWG,EAAAA,KAAK,GAAW;AAAC,WAAOC,IAAI,CAACC,IAAL,CAAUD,IAAI,CAACE,GAAL,CAAS,KAAKL,GAAL,CAASF,IAAT,CAAcQ,CAAd,GAAkB,KAAKN,GAAL,CAASD,KAAT,CAAeO,CAA1C,IAA+C,KAAKV,KAA9D,CAAP;AAA6E;;AA7BvF;AAgClB,OAAO,MAAMW,YAAN,CAAyC;AAC5C;;AAGA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AAEIZ,EAAAA,WAAW,CAAUa,IAAV,EAAiD;AAAA,SAAvCA,IAAuC,GAAvCA,IAAuC;AAAA,SAXnDC,KAWmD,GAXnC,EAWmC;AAAE;AAE9D;;;AACOC,EAAAA,IAAI,CAACC,IAAD,EAAmB;AAC1B,UAAMC,KAAa,GAAGD,IAAI,CAACf,KAA3B;AACA,UAAMiB,CAAS,GAAGV,IAAI,CAACW,MAAL,MAAiB,KAAK,KAAKN,IAAL,CAAUZ,KAAV,GAAkB,CAAvB,IAA4BgB,KAA5B,GAAoC,CAArD,IAA0DA,KAAK,GAAG,CAApF;;AAEA,UAAMd,IAAI,GAAG,KAAKiB,eAAL,CAAqBF,CAAC,GAAGD,KAAK,GAAG,CAAjC,CAAb;;AACA,UAAMb,KAAK,GAAG,KAAKgB,eAAL,CAAqBF,CAAC,GAAGD,KAAK,GAAG,CAAjC,CAAd;;AACAD,IAAAA,IAAI,CAACV,WAAL,CAAiBH,IAAjB,EAAuBC,KAAvB;AAEA,SAAKU,KAAL,CAAWO,IAAX,CAAgBL,IAAhB;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACYI,EAAAA,eAAe,CAACE,CAAD,EAAoC;AACvD,QAAIX,CAAC,GAAG,CAAR;;AACA,SAAK,MAAMY,QAAX,IAAuB,KAAKT,KAA5B,EAAmC;AAC/B,UAAIS,QAAQ,CAAClB,GAAT,CAAaF,IAAb,CAAkBmB,CAAlB,IAAuBA,CAAvB,IAA4BA,CAAC,IAAIC,QAAQ,CAAClB,GAAT,CAAaD,KAAb,CAAmBkB,CAAxD,EAA2D;AACvD,cAAME,QAAQ,GAAGhB,IAAI,CAACiB,GAAL,CAASF,QAAQ,CAAClB,GAAT,CAAaF,IAAb,CAAkBQ,CAA3B,EAA8BY,QAAQ,CAAClB,GAAT,CAAaD,KAAb,CAAmBO,CAAjD,IAAsDY,QAAQ,CAACrB,MAAT,GAAkBM,IAAI,CAACkB,GAAL,CAASH,QAAQ,CAAChB,KAAT,EAAT,CAAzF;AACA,YAAIiB,QAAQ,GAAGb,CAAf,EAAkBA,CAAC,GAAGa,QAAJ;AACrB;AACJ;;AACD,WAAO;AAACF,MAAAA,CAAC,EAAEA,CAAJ;AAAOX,MAAAA,CAAC,EAAEA;AAAV,KAAP;AACH;;AA1C2C","sourcesContent":["interface CardBucket {\n    /*** Required Representation ***/\n    \n    readonly cards: Array<Card>;\n    readonly size: {width: number, height: number};\n\n    /**\n     * Drops a card into the bucket such that the droped card is either on the floor\n     * of the bucket or is adjacent but not overlapping another card\n     * \n     * @param card to drop into the bucket, must be smaller in size than the bucket\n     */\n    drop(card: Card): void;\n}\n\nexport class Card {\n    /*** Representation ***/\n    public loc: {left: {x: number, y: number}, right: {x: number, y: number}};\n\n    /** \n     * AF(width, height, loc) =\n     * \n     * Representation Invariant\n     * \n     * Representation Exposure\n     * \n     */\n\n    constructor(readonly width: number, readonly height: number, \n                left: {x: number, y: number}, right: {x: number, y: number}) {\n        this.loc = {left: left, right: right};\n    }\n\n    /**\n     * Sets the location of the card\n     * \n     * @param left the bottom left (x, y) coordinates of the card\n     * @param right the bottom right (x, y) coordinates of the card\n     */\n    public setLocation(left: {x: number, y: number}, right: {x: number, y: number}): void {this.loc = {left: left, right: right};}\n\n    /**\n     * @returns the rotation angle of the block when placed at loc\n     */\n    public angle(): number {return Math.asin(Math.abs(this.loc.left.y - this.loc.right.y) / this.width);}\n}\n\nexport class CardBucket2D implements CardBucket {\n    /*** Representation ***/\n    readonly cards: Card[] = [];\n\n    /** \n     * AF(cards) =\n     * \n     * Representation Invariant\n     * \n     * Representation Exposure\n     * \n     */\n\n    constructor(readonly size: {width: number, height: number}) {}\n\n    /** @inheritdoc */\n    public drop(card: Card): void {\n        const cardW: number = card.width;\n        const n: number = Math.random() * (2 * (this.size.width - 1) / cardW - 1) + cardW / 2;\n        \n        const left = this._firstEncounter(n - cardW / 2);\n        const right = this._firstEncounter(n + cardW / 2);\n        card.setLocation(left, right);\n\n        this.cards.push(card);\n    }\n\n    /**\n     * Finds the card which a dropping card would encounter first as it falls\n     * \n     * @param x the x coordinate to consider\n     * @returns the (x, y) coordinate of where the first encountered card is located\n     */\n    private _firstEncounter(x: number): {x: number, y: number} {\n        let y = 0;\n        for (const currCard of this.cards) {\n            if (currCard.loc.left.x <= x && x <= currCard.loc.right.x) {\n                const currentY = Math.min(currCard.loc.left.y, currCard.loc.right.y) + currCard.height * Math.cos(currCard.angle());\n                if (currentY > y) y = currentY;\n            }\n        }\n        return {x: x, y: y};\n    }\n}"]},"metadata":{},"sourceType":"module"}